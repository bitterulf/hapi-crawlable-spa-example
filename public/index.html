<html>

<head>
    <title>mithril</title>
    <script src='//cdnjs.cloudflare.com/ajax/libs/mithril/0.2.5/mithril.min.js'></script>
</head>

<body>
    <div id='app'></div>
    <script>
        var loadedData = {};

        var Home = {
            controller: function() {
                return {}
            },

            view: function(ctrl) {
                return m('div', [
                    m('h1', 'content'),
                    m('a[href="/content"]', {
                        config: m.route
                    }, 'content')
                ]);
            }
        };

        var Content = {
            controller: function() {
                return {}
            },

            view: function(ctrl) {
                return m('div', [
                    m('h1', (loadedData.title || 'loading')),
                    m('div', (loadedData.content || 'loading')),
                    m('a[href="/"]', {
                        config: m.route
                    }, 'home')
                ]);
            }
        };

        m.route(document.getElementById('app'), '/', {
            '/': Home,
            '/content': Content,
        });

        m.request({
            method: 'GET',
            url: 'data.json'
        }).then(function(data) {
            loadedData = data;
        })
    </script>
</body>

</html>
